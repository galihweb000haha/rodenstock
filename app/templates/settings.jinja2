{% extends "layout_dashboard.jinja2" %}
{% block content %}
<div class="container-xxl flex-grow-1 container-p-y">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{category}} alert-dismissible" role="alert">
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <h4 class="fw-bold py-3 mb-4">
        <span class="text-muted fw-light">Settings /</span> Notifications
    </h4>

    <div class="row">
        <div class="col-md-12">
            <ul class="nav nav-pills flex-column flex-md-row mb-3">
                <li class="nav-item">
                    <a class="nav-link active" id="button-akun" href="javascript:void(0);"
                    ><i class="bx bx-user me-1"></i> Akun</a
                    >
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="button-reset" href="javascript:void(0);"
                    ><i class="bx bx-key me-1"></i> Ganti Password<a>
                </li>
            </ul>
            <div class="card" id="card-akun">
                <h5 class="card-header">Pengaturan Akun</h5>
                <div class="card-body">
                    <form action="{{ url_for('main_bp.settings') }}" method="post" enctype="multipart/form-data">
                        {{ form.hidden_tag() }}
                        <div class="row">
                            <div class="col-md-6 mb-2">
                                <fieldset class="name col mb-3">
                                    {{ form.name.label(class="form-label") }}
                                    {{ form.name(placeholder='Nama Lengkap', class="form-control") }}
                                    {% if form.name.errors %}
                                    <ul class="errors">
                                        {% for error in form.name.errors %}
                                        <li>{{ error }}</li>{% endfor %}
                                    </ul>
                                    {% endif %}
                                </fieldset>
                            </div>
                            <div class="col-md-6 mb-2">
                                <fieldset class="gender form-label">
                                    <label for="gender" class="form-label">{{ form.gender.label }}</label>
                                    {{ form.gender(class='form-control') }}
                                    {% if form.gender.errors %}
                                    <ul class="errors">
                                        {% for error in form.gender.errors %}
                                        <li>{{ error }}</li>{% endfor %}
                                    </ul>
                                    {% endif %}
                                </fieldset>
                            </div>
                            <div class="col-md-6 mb-2">
                                <fieldset class="email col mb-3">
                                    {{ form.email.label(class="form-label") }}
                                    {{ form.email(placeholder='Email', class="form-control") }}
                                    {% if form.email.errors %}
                                    <ul class="errors">
                                        {% for error in form.email.errors %}
                                        <li>{{ error }}</li>{% endfor %}
                                    </ul>
                                    {% endif %}
                                </fieldset>
                            </div>
                            <div class="col-md-6 mb-2">
                                <fieldset class="no_hp col mb-3">
                                    {{ form.no_hp.label(class="form-label") }}
                                    {{ form.no_hp(placeholder='no_hp', class="form-control") }}
                                    {% if form.no_hp.errors %}
                                    <ul class="errors">
                                        {% for error in form.no_hp.errors %}
                                        <li>{{ error }}</li>{% endfor %}
                                    </ul>
                                    {% endif %}
                                </fieldset>
                            </div>
                        </div>
                        <div class="submit-button">
                            {{ form.submit(class="btn btn-primary") }}
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="card d-none" id="card-reset">
                <h5 class="card-header">Ganti Password</h5>
                <div class="card-body">
                    <form action="{{ url_for('main_bp.reset') }}" method="post" enctype="multipart/form-data">
                        {{ form_reset.hidden_tag() }}
                        <div class="row">
                            <div class="col-md-12 mb-2">
                                 <fieldset class="name col mb-3">
                                    {{ form_reset.old_password.label(class="form-label") }}
                                    {{ form_reset.old_password(placeholder='Password saat ini', class="form-control") }}
                                    {% if form_reset.old_password.errors %}
                                    <ul class="errors">
                                        {% for error in form_reset.old_password.errors %}
                                        <li>{{ error }}</li>{% endfor %}
                                    </ul>
                                    {% endif %}
                                </fieldset>
                            </div>
                            <div class="col-md-6 mb-2">
                                 <fieldset class="name col mb-3">
                                    {{ form_reset.new_password.label(class="form-label") }}
                                    {{ form_reset.new_password(placeholder='Password baru', class="form-control") }}
                                    {% if form_reset.new_password.errors %}
                                    <ul class="errors">
                                        {% for error in form_reset.new_password.errors %}
                                        <li>{{ error }}</li>{% endfor %}
                                    </ul>
                                    {% endif %}
                                </fieldset>
                            </div>
                            <div class="col-md-6 mb-2">
                                 <fieldset class="name col mb-3">
                                    {{ form_reset.confirm.label(class="form-label") }}
                                    {{ form_reset.confirm(placeholder='Konfirmasi password', class="form-control") }}
                                    {% if form_reset.confirm.errors %}
                                    <ul class="errors">
                                        {% for error in form_reset.confirm.errors %}
                                        <li>{{ error }}</li>{% endfor %}
                                    </ul>
                                    {% endif %}
                                </fieldset>
                            </div>
                        </div>
                        <button class="btn btn-primary">Simpan</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% block additionalscripts %}
<script src="{{ url_for('static', filename='vendor/libs/jquery/jquery.js') }}"></script>
<script src="{{ url_for('static', filename='vendor/js/select2.min.js') }}"></script>


<script>
    $('#button-akun').on('click', function (e) {
        e.preventDefault()
        $('#card-akun').removeClass('d-none')
        $('#card-reset').addClass('d-none')
        $(this).addClass('active')
        $('#button-reset').removeClass('active')
    })
    $('#button-reset').on('click', function (e) {
        e.preventDefault()
        $('#card-reset').removeClass('d-none')
        $('#card-akun').addClass('d-none')
        $(this).addClass('active')
        $('#button-akun').removeClass('active')
    })
</script>

<script>
    $(document).ready(function() {
        $('.my_selection').select2();
        $('.select2-selection__arrow').removeClass('select2-selection__arrow')
        $('.select2-selection').css('border', 0)
        $('#search_menu').on('change', function() {
            document.location.href = $(this).val()
        })
    })

</script>
{% endblock %}
{% endblock %}